<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linux Terminal - Mode Apprentissage</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Sora:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root{--bg-primary:#0a0a0f;--bg-terminal:#0c0c14;--bg-header:#1a1a24;--text-primary:#e0e0e0;--text-green:#4ade80;--text-cyan:#22d3ee;--text-yellow:#facc15;--text-red:#f87171;--text-purple:#c084fc;--text-blue:#60a5fa;--text-orange:#fb923c;--border-color:#2a2a3a}
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:'Sora',sans-serif;background:var(--bg-primary);min-height:100vh;display:flex;flex-direction:column;align-items:center;padding:1.5rem;gap:1.5rem}
        .page-header{text-align:center}.page-header h1{font-size:2rem;color:var(--text-primary);margin-bottom:.5rem}.page-header h1 span{color:var(--text-green)}.page-header p{color:#888;font-size:.95rem}
        .main-container{display:flex;gap:1.5rem;width:100%;max-width:1400px;flex-wrap:wrap;justify-content:center}
        .terminal-container{flex:1;min-width:550px;max-width:850px;background:var(--bg-terminal);border-radius:12px;border:1px solid var(--border-color);overflow:hidden;box-shadow:0 25px 50px rgba(0,0,0,.5),0 0 100px rgba(74,222,128,.1)}
        .terminal-header{background:var(--bg-header);padding:.75rem 1rem;display:flex;align-items:center;gap:.75rem;border-bottom:1px solid var(--border-color)}
        .terminal-dots{display:flex;gap:.5rem}.dot{width:12px;height:12px;border-radius:50%}.dot-red{background:#f87171}.dot-yellow{background:#facc15}.dot-green{background:#4ade80}
        .terminal-title{flex:1;text-align:center;font-family:'JetBrains Mono',monospace;font-size:.85rem;color:#888}
        .terminal-body{padding:1rem;height:480px;overflow-y:auto;font-family:'JetBrains Mono',monospace;font-size:.85rem;line-height:1.6}
        .terminal-body::-webkit-scrollbar{width:8px}.terminal-body::-webkit-scrollbar-track{background:var(--bg-terminal)}.terminal-body::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:4px}
        .learn-panel{width:380px;background:linear-gradient(135deg,#0f0f1a,#1a1a2e);border-radius:12px;border:1px solid var(--border-color);overflow:hidden;box-shadow:0 25px 50px rgba(0,0,0,.5),0 0 60px rgba(192,132,252,.1)}
        .learn-header{background:linear-gradient(135deg,var(--bg-header),#252538);padding:1rem 1.25rem;border-bottom:1px solid var(--border-color)}.learn-header h2{color:var(--text-primary);font-size:1.1rem;display:flex;align-items:center;gap:.5rem}
        .learn-content{padding:1rem;height:510px;overflow-y:auto}.learn-content::-webkit-scrollbar{width:6px}.learn-content::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}
        .progress-section{margin-bottom:1.5rem}.progress-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem}.progress-label{color:var(--text-primary);font-size:.85rem;font-weight:600}.progress-percent{color:var(--text-green);font-size:.85rem;font-weight:700}
        .progress-bar-container{background:#1a1a2e;border-radius:10px;height:12px;overflow:hidden;border:1px solid var(--border-color)}.progress-bar{height:100%;background:linear-gradient(90deg,var(--text-green),var(--text-cyan));border-radius:10px;transition:width .5s ease}
        .level-card{background:linear-gradient(135deg,#1a1a2e,#252540);border-radius:10px;border:1px solid var(--border-color);margin-bottom:.75rem;overflow:hidden;transition:all .3s ease;cursor:pointer}
        .level-card:hover{border-color:var(--text-purple);transform:translateX(5px)}.level-card.locked{opacity:.5;cursor:not-allowed}.level-card.locked:hover{transform:none;border-color:var(--border-color)}.level-card.completed{border-color:var(--text-cyan)}
        .level-header{padding:.75rem 1rem;display:flex;align-items:center;gap:.75rem}.level-icon{width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:1.2rem}
        .level-1 .level-icon{background:linear-gradient(135deg,#4ade80,#22c55e)}.level-2 .level-icon{background:linear-gradient(135deg,#60a5fa,#3b82f6)}.level-3 .level-icon{background:linear-gradient(135deg,#facc15,#eab308)}.level-4 .level-icon{background:linear-gradient(135deg,#fb923c,#f97316)}.level-5 .level-icon{background:linear-gradient(135deg,#c084fc,#a855f7)}
        .level-info{flex:1}.level-title{color:var(--text-primary);font-size:.9rem;font-weight:600;margin-bottom:.15rem}.level-subtitle{color:#888;font-size:.75rem}.level-status{font-size:1.1rem}
        .level-progress{padding:0 1rem .75rem}.level-progress-bar{background:#0a0a15;border-radius:6px;height:6px;overflow:hidden}.level-progress-fill{height:100%;background:var(--text-green);border-radius:6px;transition:width .3s ease}
        .lesson-view{display:none}.lesson-view.active{display:block}.lesson-back{display:flex;align-items:center;gap:.5rem;color:var(--text-cyan);font-size:.85rem;cursor:pointer;margin-bottom:1rem;transition:color .3s ease}.lesson-back:hover{color:var(--text-green)}
        .lesson-title-section{text-align:center;margin-bottom:1.25rem;padding-bottom:1rem;border-bottom:1px solid var(--border-color)}.lesson-level-badge{display:inline-block;padding:.25rem .75rem;border-radius:20px;font-size:.7rem;font-weight:600;text-transform:uppercase;margin-bottom:.5rem}
        .badge-level-1{background:rgba(74,222,128,.2);color:var(--text-green)}.badge-level-2{background:rgba(96,165,250,.2);color:var(--text-blue)}.badge-level-3{background:rgba(250,204,21,.2);color:var(--text-yellow)}.badge-level-4{background:rgba(251,146,60,.2);color:var(--text-orange)}.badge-level-5{background:rgba(192,132,252,.2);color:var(--text-purple)}
        .lesson-main-title{color:var(--text-primary);font-size:1.1rem;margin-bottom:.25rem}.lesson-subtitle{color:#888;font-size:.8rem}
        .lesson-step{background:#0f0f1a;border-radius:10px;padding:1rem;margin-bottom:1rem;border-left:3px solid var(--border-color)}.lesson-step.current{border-left-color:var(--text-green);box-shadow:0 0 15px rgba(74,222,128,.1)}.lesson-step.completed{border-left-color:var(--text-cyan);opacity:.7}
        .step-header{display:flex;align-items:center;gap:.5rem;margin-bottom:.75rem}.step-number{width:24px;height:24px;border-radius:50%;background:var(--border-color);display:flex;align-items:center;justify-content:center;font-size:.75rem;color:var(--text-primary);font-weight:600}
        .lesson-step.current .step-number{background:var(--text-green);color:#000}.lesson-step.completed .step-number{background:var(--text-cyan);color:#000}.step-title{color:var(--text-primary);font-size:.85rem;font-weight:600}
        .step-content{color:#aaa;font-size:.8rem;line-height:1.5}.step-content code{background:#1a1a2e;padding:.15rem .4rem;border-radius:4px;color:var(--text-yellow);font-family:'JetBrains Mono',monospace;font-size:.8rem}
        .demo-box{background:#0a0a12;border-radius:8px;padding:.75rem;margin-top:.75rem;border:1px solid var(--border-color);font-family:'JetBrains Mono',monospace;font-size:.75rem}.demo-label{color:var(--text-purple);font-size:.65rem;text-transform:uppercase;letter-spacing:1px;margin-bottom:.5rem;font-family:'Sora',sans-serif}.demo-command{color:var(--text-green)}.demo-output{color:#888;margin-top:.25rem;white-space:pre-wrap}
        .practice-section{background:linear-gradient(135deg,#1a2a1a,#1a2e1a);border-radius:10px;padding:1rem;border:1px solid rgba(74,222,128,.3);margin-top:1rem}.practice-header{display:flex;align-items:center;gap:.5rem;margin-bottom:.75rem}.practice-icon{font-size:1.1rem}.practice-title{color:var(--text-green);font-size:.85rem;font-weight:600}.practice-instruction{color:#ccc;font-size:.8rem;line-height:1.5;margin-bottom:.75rem}
        .practice-hint{display:flex;align-items:flex-start;gap:.5rem;background:rgba(250,204,21,.1);padding:.5rem .75rem;border-radius:6px;margin-top:.5rem}.practice-hint-icon{color:var(--text-yellow);font-size:.9rem}.practice-hint-text{color:var(--text-yellow);font-size:.75rem;line-height:1.4}
        .success-message{display:none;background:linear-gradient(135deg,#1a2e1a,#1a3a1a);border-radius:10px;padding:1rem;border:1px solid var(--text-green);text-align:center;margin-top:1rem;animation:successPulse .5s ease}.success-message.show{display:block}
        @keyframes successPulse{0%{transform:scale(.95);opacity:0}50%{transform:scale(1.02)}100%{transform:scale(1);opacity:1}}
        .success-icon{font-size:2rem;margin-bottom:.5rem}.success-text{color:var(--text-green);font-size:.9rem;font-weight:600;margin-bottom:.25rem}.success-subtext{color:#888;font-size:.75rem}
        .next-button{background:linear-gradient(135deg,var(--text-green),var(--text-cyan));color:#000;border:none;padding:.5rem 1.25rem;border-radius:6px;font-size:.8rem;font-weight:600;cursor:pointer;margin-top:.75rem;transition:transform .3s ease}.next-button:hover{transform:translateY(-2px);box-shadow:0 5px 20px rgba(74,222,128,.3)}
        .output-line{margin-bottom:.25rem;white-space:pre-wrap;word-break:break-all}.output-line.command{color:var(--text-primary)}.output-line.result{color:#aaa}.output-line.error{color:var(--text-red)}.output-line.success{color:var(--text-green)}.output-line.info{color:var(--text-cyan)}.output-line.warning{color:var(--text-yellow)}
        .prompt-user{color:var(--text-cyan)}.prompt-separator{color:var(--text-primary)}.prompt-path{color:var(--text-purple)}.prompt-symbol{color:var(--text-green)}
        .input-line{display:flex;align-items:center}.input-line input{flex:1;background:transparent;border:none;outline:none;color:var(--text-primary);font-family:'JetBrains Mono',monospace;font-size:.85rem;caret-color:var(--text-green)}
        .welcome-art{color:var(--text-green);margin-bottom:1rem}.file-list{display:flex;flex-wrap:wrap;gap:1.5rem}.file-item{min-width:120px}.file-item.directory{color:var(--text-blue);font-weight:bold}.file-item.executable{color:var(--text-green)}.file-item.hidden{color:#666}
        .help-command{color:var(--text-yellow);display:inline-block;min-width:140px}.help-desc{color:#888}
        .badge-notification{position:fixed;top:20px;right:20px;background:linear-gradient(135deg,#1a1a2e,#252540);border:2px solid var(--text-yellow);border-radius:12px;padding:1rem 1.5rem;display:none;align-items:center;gap:1rem;box-shadow:0 10px 40px rgba(0,0,0,.5);z-index:1000;animation:slideIn .5s ease}.badge-notification.show{display:flex}
        @keyframes slideIn{from{transform:translateX(100px);opacity:0}to{transform:translateX(0);opacity:1}}
        .badge-notif-icon{font-size:2.5rem}.badge-notif-title{color:var(--text-yellow);font-size:.75rem;text-transform:uppercase;letter-spacing:1px}.badge-notif-name{color:var(--text-primary);font-size:1rem;font-weight:600}
        .badges-section{margin-top:1.5rem;padding-top:1rem;border-top:1px solid var(--border-color)}.badges-title{color:var(--text-primary);font-size:.85rem;margin-bottom:.75rem;display:flex;align-items:center;gap:.5rem}.badges-grid{display:flex;flex-wrap:wrap;gap:.5rem}
        .badge-item{width:40px;height:40px;border-radius:10px;background:#1a1a2e;border:1px solid var(--border-color);display:flex;align-items:center;justify-content:center;font-size:1.2rem;opacity:.3;transition:all .3s ease}.badge-item.earned{opacity:1;border-color:var(--text-yellow);box-shadow:0 0 10px rgba(250,204,21,.2)}
        @media(max-width:1100px){.main-container{flex-direction:column;align-items:center}.terminal-container{min-width:100%;max-width:100%}.learn-panel{width:100%;max-width:600px}}
        @media(max-width:768px){body{padding:1rem}.page-header h1{font-size:1.5rem}.terminal-body{height:300px;font-size:.75rem}.learn-content{height:350px}}
    </style>
</head>
<body>
    <div class="page-header"><h1>üêß Linux <span>Terminal</span> Simulator</h1><p>Apprenez les commandes Linux de mani√®re interactive</p></div>
    <div class="main-container">
        <div class="terminal-container">
            <div class="terminal-header"><div class="terminal-dots"><div class="dot dot-red"></div><div class="dot dot-yellow"></div><div class="dot dot-green"></div></div><div class="terminal-title">edem38@linux:~</div></div>
            <div class="terminal-body" id="terminal"></div>
        </div>
        <div class="learn-panel">
            <div class="learn-header"><h2>üéì Mode Apprentissage</h2></div>
            <div class="learn-content" id="learn-content">
                <div class="levels-view" id="levels-view">
                    <div class="progress-section"><div class="progress-header"><span class="progress-label">Progression globale</span><span class="progress-percent" id="global-progress">0%</span></div><div class="progress-bar-container"><div class="progress-bar" id="progress-bar" style="width:0%"></div></div></div>
                    <div id="level-cards"></div>
                    <div class="badges-section"><div class="badges-title">üèÜ Badges obtenus</div><div class="badges-grid" id="badges-grid"></div></div>
                </div>
                <div class="lesson-view" id="lesson-view"></div>
            </div>
        </div>
    </div>
    <div class="badge-notification" id="badge-notification"><div class="badge-notif-icon" id="badge-notif-icon">üèÜ</div><div class="badge-notif-content"><div class="badge-notif-title">Badge d√©bloqu√© !</div><div class="badge-notif-name" id="badge-notif-name">Explorateur</div></div></div>
<script>
const learningData={levels:[{id:1,title:"Premiers Pas",subtitle:"Navigation dans le terminal",icon:"üê£",lessons:[{title:"O√π suis-je ?",command:"pwd",explanation:"<code>pwd</code> (Print Working Directory) affiche le chemin du r√©pertoire actuel.",demo:{cmd:"pwd",output:"/home/edem38"},practice:"Tapez <code>pwd</code>",validation:c=>c.trim()==='pwd'},{title:"Lister les fichiers",command:"ls",explanation:"<code>ls</code> affiche la liste des fichiers et dossiers.",demo:{cmd:"ls",output:"documents  projets  scripts  README.md"},practice:"Tapez <code>ls</code>",validation:c=>c.trim()==='ls'},{title:"Liste d√©taill√©e",command:"ls -l",explanation:"L'option <code>-l</code> affiche permissions, propri√©taire, taille et date.",demo:{cmd:"ls -l",output:"drwxr-xr-x  2 edem38 4096 projets\n-rw-r--r--  1 edem38 1234 README.md"},practice:"Tapez <code>ls -l</code>",validation:c=>c.trim()==='ls -l'},{title:"Fichiers cach√©s",command:"ls -a",explanation:"L'option <code>-a</code> affiche les fichiers cach√©s (commen√ßant par .).",demo:{cmd:"ls -a",output:".  ..  .bashrc  .profile  documents"},practice:"Tapez <code>ls -a</code>",validation:c=>c.includes('ls')&&c.includes('-a')},{title:"Se d√©placer",command:"cd",explanation:"<code>cd</code> permet de naviguer. <code>cd ..</code> remonte d'un niveau.",demo:{cmd:"cd projets",output:"(maintenant dans ~/projets)"},practice:"Tapez <code>cd projets</code>",validation:c=>c.trim().startsWith('cd ')},{title:"Nettoyer l'√©cran",command:"clear",explanation:"<code>clear</code> efface l'√©cran. Raccourci : Ctrl+L",demo:{cmd:"clear",output:"(√©cran vide)"},practice:"Tapez <code>clear</code>",validation:c=>c.trim()==='clear'}]},{id:2,title:"Manipulation de Fichiers",subtitle:"Cr√©er, copier, d√©placer, supprimer",icon:"üìÅ",lessons:[{title:"Cr√©er un fichier",command:"touch",explanation:"<code>touch</code> cr√©e un fichier vide.",demo:{cmd:"touch test.txt",output:"Fichier 'test.txt' cr√©√©"},practice:"Tapez <code>touch test.txt</code>",validation:c=>c.trim().startsWith('touch ')},{title:"Cr√©er un dossier",command:"mkdir",explanation:"<code>mkdir</code> cr√©e un nouveau r√©pertoire.",demo:{cmd:"mkdir dossier",output:"R√©pertoire 'dossier' cr√©√©"},practice:"Tapez <code>mkdir nouveau</code>",validation:c=>c.trim().startsWith('mkdir ')},{title:"Lire un fichier",command:"cat",explanation:"<code>cat</code> affiche le contenu d'un fichier.",demo:{cmd:"cat README.md",output:"# Bienvenue..."},practice:"Tapez <code>cat README.md</code>",validation:c=>c.trim().startsWith('cat ')},{title:"Copier",command:"cp",explanation:"<code>cp source dest</code> copie un fichier.",demo:{cmd:"cp a.txt b.txt",output:"'a.txt' copi√©"},practice:"Copiez un fichier avec <code>cp</code>",validation:c=>c.trim().startsWith('cp ')},{title:"D√©placer/Renommer",command:"mv",explanation:"<code>mv</code> d√©place ou renomme.",demo:{cmd:"mv old.txt new.txt",output:"'old.txt' ‚Üí 'new.txt'"},practice:"Utilisez <code>mv</code>",validation:c=>c.trim().startsWith('mv ')},{title:"Supprimer",command:"rm",explanation:"<code>rm</code> supprime. <code>rm -r</code> pour dossiers. ‚ö†Ô∏è Pas de corbeille!",demo:{cmd:"rm fichier.txt",output:"'fichier.txt' supprim√©"},practice:"Supprimez avec <code>rm</code>",validation:c=>c.trim().startsWith('rm ')}]},{id:3,title:"Exploration & Recherche",subtitle:"Trouver ce que vous cherchez",icon:"üîç",lessons:[{title:"Chercher des fichiers",command:"find",explanation:"<code>find chemin -name \"motif\"</code> recherche des fichiers.",demo:{cmd:'find . -name "*.md"',output:"./README.md\n./todo.md"},practice:'Tapez <code>find . -name "*.md"</code>',validation:c=>c.trim().startsWith('find ')},{title:"Chercher dans fichiers",command:"grep",explanation:"<code>grep</code> recherche du texte dans les fichiers.",demo:{cmd:'grep "Linux" README.md',output:"- Linux (Ubuntu, Debian)"},practice:'Tapez <code>grep "Linux" README.md</code>',validation:c=>c.trim().startsWith('grep ')},{title:"D√©but d'un fichier",command:"head",explanation:"<code>head</code> affiche les 10 premi√®res lignes.",demo:{cmd:"head README.md",output:"# Bienvenue..."},practice:"Tapez <code>head README.md</code>",validation:c=>c.trim().startsWith('head ')},{title:"Fin d'un fichier",command:"tail",explanation:"<code>tail</code> affiche les 10 derni√®res lignes.",demo:{cmd:"tail README.md",output:"- Portfolio: edem38.github.io"},practice:"Tapez <code>tail README.md</code>",validation:c=>c.trim().startsWith('tail ')},{title:"Compter",command:"wc",explanation:"<code>wc</code> compte lignes, mots et caract√®res.",demo:{cmd:"wc README.md",output:"  15   52  384 README.md"},practice:"Tapez <code>wc README.md</code>",validation:c=>c.trim().startsWith('wc ')},{title:"Arborescence",command:"tree",explanation:"<code>tree</code> affiche la structure en arbre.",demo:{cmd:"tree",output:".\n‚îú‚îÄ‚îÄ documents\n‚îî‚îÄ‚îÄ projets"},practice:"Tapez <code>tree</code>",validation:c=>c.trim()==='tree'||c.trim().startsWith('tree ')}]},{id:4,title:"Informations Syst√®me",subtitle:"Comprendre votre machine",icon:"üíª",lessons:[{title:"Qui suis-je ?",command:"whoami",explanation:"<code>whoami</code> affiche l'utilisateur connect√©.",demo:{cmd:"whoami",output:"edem38"},practice:"Tapez <code>whoami</code>",validation:c=>c.trim()==='whoami'},{title:"Nom de la machine",command:"hostname",explanation:"<code>hostname</code> affiche le nom de l'ordinateur.",demo:{cmd:"hostname",output:"edem38-pc"},practice:"Tapez <code>hostname</code>",validation:c=>c.trim()==='hostname'},{title:"Infos syst√®me",command:"uname -a",explanation:"<code>uname -a</code> affiche kernel, architecture...",demo:{cmd:"uname -a",output:"Linux edem38-pc 5.15.0-91-generic x86_64"},practice:"Tapez <code>uname -a</code>",validation:c=>c.trim()==='uname -a'||c.trim()==='uname'},{title:"Date et heure",command:"date",explanation:"<code>date</code> affiche date et heure.",demo:{cmd:"date",output:"ven. 23 janv. 2026 14:32:15"},practice:"Tapez <code>date</code>",validation:c=>c.trim()==='date'},{title:"Uptime",command:"uptime",explanation:"<code>uptime</code> indique depuis combien de temps le syst√®me tourne.",demo:{cmd:"uptime",output:"up 47 days, load: 0.52"},practice:"Tapez <code>uptime</code>",validation:c=>c.trim()==='uptime'},{title:"Espace disque",command:"df -h",explanation:"<code>df -h</code> affiche l'espace disque.",demo:{cmd:"df -h",output:"/dev/sda1  1.0T  256G  744G  26%"},practice:"Tapez <code>df -h</code>",validation:c=>c.trim()==='df'||c.trim()==='df -h'},{title:"Processus",command:"ps",explanation:"<code>ps</code> affiche les processus en cours.",demo:{cmd:"ps",output:"PID TTY  TIME CMD\n1234 bash"},practice:"Tapez <code>ps</code>",validation:c=>c.trim()==='ps'||c.trim().startsWith('ps ')}]},{id:5,title:"Outils Avanc√©s",subtitle:"Devenez un pro du terminal",icon:"üöÄ",lessons:[{title:"Historique",command:"history",explanation:"<code>history</code> affiche l'historique des commandes.",demo:{cmd:"history",output:"  1  pwd\n  2  ls -la"},practice:"Tapez <code>history</code>",validation:c=>c.trim()==='history'},{title:"Afficher du texte",command:"echo",explanation:"<code>echo</code> affiche du texte.",demo:{cmd:'echo "Bonjour"',output:"Bonjour"},practice:'Tapez <code>echo "Hello"</code>',validation:c=>c.trim().startsWith('echo ')},{title:"Alias",command:"alias",explanation:"<code>alias</code> cr√©e des raccourcis.",demo:{cmd:"alias",output:"alias ll='ls -la'"},practice:"Tapez <code>alias</code>",validation:c=>c.trim()==='alias'||c.trim().startsWith('alias ')},{title:"Le pipe |",command:"|",explanation:"Le <code>|</code> envoie la sortie vers une autre commande.",demo:{cmd:"ls | grep md",output:"README.md"},practice:"Tapez <code>ls | grep md</code>",validation:c=>c.includes('|')},{title:"Redirection >",command:">",explanation:"<code>></code> redirige vers un fichier.",demo:{cmd:'echo "test" > file.txt',output:"(√©crit dans file.txt)"},practice:'Tapez <code>echo "test" > output.txt</code>',validation:c=>c.includes('>')},{title:"Permissions",command:"chmod",explanation:"<code>chmod +x</code> rend un fichier ex√©cutable.",demo:{cmd:"chmod +x script.sh",output:"(permissions modifi√©es)"},practice:"Tapez <code>chmod +x scripts/backup.sh</code>",validation:c=>c.trim().startsWith('chmod ')}]}],badges:[{id:"level1",name:"Explorateur",icon:"üê£"},{id:"level2",name:"Organisateur",icon:"üìÅ"},{id:"level3",name:"D√©tective",icon:"üîç"},{id:"level4",name:"Admin Sys",icon:"üíª"},{id:"level5",name:"Ma√Ætre Linux",icon:"üöÄ"}]};
let learningState={currentLevel:1,currentLesson:0,completedLessons:{},earnedBadges:[],inLessonMode:false};
let currentPath='/home/edem38',commandHistory=[],historyIndex=-1;
const terminal=document.getElementById('terminal');
const fileSystem={'/':{ type:'dir',children:['home','etc','var','tmp']},'/home':{type:'dir',children:['edem38']},'/home/edem38':{type:'dir',children:['projets','documents','scripts','.bashrc','.profile','README.md']},'/home/edem38/projets':{type:'dir',children:['sysmonitor','portfolio']},'/home/edem38/projets/sysmonitor':{type:'dir',children:['index.html','README.md']},'/home/edem38/projets/portfolio':{type:'dir',children:['index.html','style.css']},'/home/edem38/documents':{type:'dir',children:['notes.txt','todo.md']},'/home/edem38/scripts':{type:'dir',children:['backup.sh','deploy.sh']},'/etc':{type:'dir',children:['hosts','passwd']},'/var':{type:'dir',children:['log']},'/var/log':{type:'dir',children:['syslog']},'/tmp':{type:'dir',children:[]},'/home/edem38/README.md':{type:'file',content:'# Bienvenue !\n\nJe suis edem38, ing√©nieur Linux/DevOps.\n\n## Comp√©tences\n- Linux (Ubuntu, Debian)\n- Docker & Kubernetes\n- Ansible & Terraform\n- Python & Bash\n\n## Contact\n- GitHub: @edem38'},'/home/edem38/.bashrc':{type:'file',content:"# ~/.bashrc\nalias ll='ls -la'\nalias gs='git status'"},'/home/edem38/.profile':{type:'file',content:'# ~/.profile'},'/home/edem38/documents/notes.txt':{type:'file',content:'Notes du jour:\n- Finir le dashboard\n- Tester Kubernetes'},'/home/edem38/documents/todo.md':{type:'file',content:'# Todo\n- [x] Portfolio\n- [ ] Apprendre Rust'},'/home/edem38/scripts/backup.sh':{type:'file',executable:true,content:'#!/bin/bash\necho "Backup..."'},'/home/edem38/scripts/deploy.sh':{type:'file',executable:true,content:'#!/bin/bash\necho "Deploy..."'},'/home/edem38/projets/sysmonitor/README.md':{type:'file',content:'# SysMonitor\nDashboard monitoring.'},'/etc/hosts':{type:'file',content:'127.0.0.1 localhost'},'/etc/passwd':{type:'file',content:'root:x:0:0::/root:/bin/bash\nedem38:x:1000:1000::/home/edem38:/bin/bash'}};
function loadState(){const s=localStorage.getItem('linuxLearn');if(s)learningState={...learningState,...JSON.parse(s)};}
function saveState(){localStorage.setItem('linuxLearn',JSON.stringify(learningState));}
function resolvePath(p){if(p.startsWith('/'))return normalizePath(p);if(p==='~')return'/home/edem38';if(p.startsWith('~/'))return normalizePath('/home/edem38/'+p.slice(2));return normalizePath(currentPath+'/'+p);}
function normalizePath(p){const parts=p.split('/').filter(x=>x&&x!=='.');const result=[];for(const part of parts){if(part==='..')result.pop();else result.push(part);}return'/'+result.join('/');}
function getPrompt(){const d=currentPath==='/home/edem38'?'~':currentPath.startsWith('/home/edem38/')?'~'+currentPath.slice(12):currentPath;return`<span class="prompt-user">edem38</span><span class="prompt-separator">@</span><span class="prompt-user">linux</span><span class="prompt-separator">:</span><span class="prompt-path">${d}</span><span class="prompt-symbol">$</span> `;}
function addOutput(html,cls=''){const l=document.createElement('div');l.className='output-line '+cls;l.innerHTML=html;terminal.appendChild(l);terminal.scrollTop=terminal.scrollHeight;}
function isDir(p){return fileSystem[p]?.type==='dir';}
function isFile(p){return fileSystem[p]?.type==='file';}
function exists(p){if(fileSystem[p])return true;const parent=p.substring(0,p.lastIndexOf('/'))||'/';const name=p.substring(p.lastIndexOf('/')+1);return fileSystem[parent]?.children?.includes(name);}
function calcProgress(){let t=0,c=0;learningData.levels.forEach(l=>{t+=l.lessons.length;c+=(learningState.completedLessons[l.id]||[]).length;});return Math.round((c/t)*100);}
function calcLevelProgress(id){const l=learningData.levels.find(x=>x.id===id);return Math.round(((learningState.completedLessons[id]||[]).length/l.lessons.length)*100);}
function isUnlocked(id){if(id===1)return true;const prev=learningData.levels.find(x=>x.id===id-1);return(learningState.completedLessons[id-1]||[]).length>=prev.lessons.length;}
function isCompleted(id){const l=learningData.levels.find(x=>x.id===id);return(learningState.completedLessons[id]||[]).length>=l.lessons.length;}
function renderLevels(){document.getElementById('global-progress').textContent=calcProgress()+'%';document.getElementById('progress-bar').style.width=calcProgress()+'%';const c=document.getElementById('level-cards');c.innerHTML='';learningData.levels.forEach(level=>{const unlocked=isUnlocked(level.id),completed=isCompleted(level.id),prog=calcLevelProgress(level.id);const card=document.createElement('div');card.className=`level-card level-${level.id} ${!unlocked?'locked':''} ${completed?'completed':''}`;card.innerHTML=`<div class="level-header"><div class="level-icon">${level.icon}</div><div class="level-info"><div class="level-title">Niveau ${level.id}: ${level.title}</div><div class="level-subtitle">${level.subtitle}</div></div><div class="level-status">${completed?'‚úÖ':unlocked?'‚ñ∂Ô∏è':'üîí'}</div></div><div class="level-progress"><div class="level-progress-bar"><div class="level-progress-fill" style="width:${prog}%"></div></div></div>`;if(unlocked)card.onclick=()=>startLevel(level.id);c.appendChild(card);});const bg=document.getElementById('badges-grid');bg.innerHTML='';learningData.badges.forEach(b=>{const el=document.createElement('div');el.className=`badge-item ${learningState.earnedBadges.includes(b.id)?'earned':''}`;el.innerHTML=b.icon;el.title=b.name;bg.appendChild(el);});}
function startLevel(id){learningState.currentLevel=id;learningState.currentLesson=0;learningState.inLessonMode=true;saveState();renderLesson();}
function renderLesson(){const level=learningData.levels.find(l=>l.id===learningState.currentLevel);const lv=document.getElementById('lesson-view'),levelsV=document.getElementById('levels-view');levelsV.style.display='none';lv.style.display='block';lv.classList.add('active');const completed=learningState.completedLessons[level.id]||[];let html=`<div class="lesson-back" onclick="backToLevels()">‚Üê Retour</div><div class="lesson-title-section"><div class="lesson-level-badge badge-level-${level.id}">Niveau ${level.id}</div><div class="lesson-main-title">${level.icon} ${level.title}</div><div class="lesson-subtitle">${level.subtitle}</div></div>`;level.lessons.forEach((lesson,i)=>{const done=completed.includes(i),current=i===learningState.currentLesson&&!done;html+=`<div class="lesson-step ${current?'current':''} ${done?'completed':''}"><div class="step-header"><div class="step-number">${done?'‚úì':i+1}</div><div class="step-title">${lesson.title} <code>${lesson.command}</code></div></div><div class="step-content"><p>${lesson.explanation}</p><div class="demo-box"><div class="demo-label">D√©monstration</div><div class="demo-command">$ ${lesson.demo.cmd}</div><div class="demo-output">${lesson.demo.output}</div></div></div></div>`;});const curr=level.lessons[learningState.currentLesson];if(curr&&!completed.includes(learningState.currentLesson)){html+=`<div class="practice-section"><div class="practice-header"><span class="practice-icon">‚å®Ô∏è</span><span class="practice-title">√Ä vous de jouer !</span></div><div class="practice-instruction">${curr.practice}</div><div class="practice-hint"><span class="practice-hint-icon">üí°</span><span class="practice-hint-text">Tapez la commande dans le terminal</span></div></div>`;}html+=`<div class="success-message" id="success-message"><div class="success-icon">üéâ</div><div class="success-text">Excellent !</div><div class="success-subtext">Commande <code>${curr?curr.command:''}</code> ma√Ætris√©e</div><button class="next-button" onclick="nextLesson()">Continuer ‚Üí</button></div>`;lv.innerHTML=html;}
function backToLevels(){learningState.inLessonMode=false;saveState();document.getElementById('lesson-view').style.display='none';document.getElementById('levels-view').style.display='block';renderLevels();}
function validateCmd(cmd){if(!learningState.inLessonMode)return;const level=learningData.levels.find(l=>l.id===learningState.currentLevel);const lesson=level.lessons[learningState.currentLesson];const completed=learningState.completedLessons[level.id]||[];if(completed.includes(learningState.currentLesson))return;if(lesson&&lesson.validation(cmd)){if(!learningState.completedLessons[level.id])learningState.completedLessons[level.id]=[];learningState.completedLessons[level.id].push(learningState.currentLesson);saveState();setTimeout(()=>{const s=document.getElementById('success-message');if(s)s.classList.add('show');},500);if(isCompleted(level.id)){const bid=`level${level.id}`;if(!learningState.earnedBadges.includes(bid)){learningState.earnedBadges.push(bid);saveState();showBadge(learningData.badges.find(b=>b.id===bid));}}}}
function nextLesson(){const level=learningData.levels.find(l=>l.id===learningState.currentLevel);if(learningState.currentLesson<level.lessons.length-1){learningState.currentLesson++;saveState();renderLesson();}else backToLevels();}
function showBadge(badge){const n=document.getElementById('badge-notification');document.getElementById('badge-notif-icon').textContent=badge.icon;document.getElementById('badge-notif-name').textContent=badge.name;n.classList.add('show');setTimeout(()=>n.classList.remove('show'),3500);}
const commands={help:()=>addOutput(`<span style="color:var(--text-cyan)">‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</span>\n<span style="color:var(--text-green)">        COMMANDES DISPONIBLES</span>\n<span style="color:var(--text-cyan)">‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</span>\n\n<span style="color:var(--text-yellow)">üìÅ NAVIGATION</span>\n<span class="help-command">ls [-la]</span> <span class="help-desc">Liste fichiers</span>\n<span class="help-command">cd [path]</span> <span class="help-desc">Change r√©pertoire</span>\n<span class="help-command">pwd</span> <span class="help-desc">R√©pertoire courant</span>\n<span class="help-command">tree</span> <span class="help-desc">Arborescence</span>\n\n<span style="color:var(--text-yellow)">üìÑ FICHIERS</span>\n<span class="help-command">cat/head/tail</span> <span class="help-desc">Lire fichiers</span>\n<span class="help-command">touch/mkdir</span> <span class="help-desc">Cr√©er</span>\n<span class="help-command">cp/mv/rm</span> <span class="help-desc">Copier/d√©placer/supprimer</span>\n<span class="help-command">find/grep/wc</span> <span class="help-desc">Rechercher/compter</span>\n\n<span style="color:var(--text-yellow)">üíª SYST√àME</span>\n<span class="help-command">whoami/hostname</span> <span class="help-desc">Infos utilisateur</span>\n<span class="help-command">uname/date/uptime</span> <span class="help-desc">Infos syst√®me</span>\n<span class="help-command">df/ps</span> <span class="help-desc">Disque/processus</span>\n\n<span style="color:var(--text-yellow)">üéì APPRENTISSAGE</span>\n<span class="help-command">learn</span> <span class="help-desc">D√©marrer tutoriel</span>\n<span class="help-command">learn reset</span> <span class="help-desc">R√©initialiser</span>\n<span style="color:var(--text-cyan)">‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</span>`,'result'),learn:(args)=>{if(args[0]==='reset'){learningState={currentLevel:1,currentLesson:0,completedLessons:{},earnedBadges:[],inLessonMode:false};saveState();renderLevels();addOutput('üîÑ Progression r√©initialis√©e !','success');return;}addOutput(`üéì <span style="color:var(--text-green)">Mode Apprentissage</span>\n\nUtilisez le panneau de droite pour les le√ßons.\nCliquez sur un niveau pour commencer !`,'info');},ls:(args)=>{let all=false,long=false,target=currentPath;args.forEach(a=>{if(a==='-a')all=true;else if(a==='-l')long=true;else if(a==='-la'||a==='-al'){all=true;long=true;}else if(!a.startsWith('-'))target=resolvePath(a);});if(!isDir(target)){addOutput(`ls: '${args[args.length-1]||target}': Non trouv√©`,'error');return;}let items=fileSystem[target].children||[];if(!all)items=items.filter(i=>!i.startsWith('.'));if(long){if(all){addOutput('drwxr-xr-x edem38 4096 <span style="color:var(--text-blue);font-weight:bold">.</span>','result');addOutput('drwxr-xr-x edem38 4096 <span style="color:var(--text-blue);font-weight:bold">..</span>','result');}items.forEach(item=>{const fp=target==='/'?'/'+item:target+'/'+item;const d=isDir(fp),ex=fileSystem[fp]?.executable;const perm=d?'drwxr-xr-x':ex?'-rwxr-xr-x':'-rw-r--r--';const st=d?'color:var(--text-blue);font-weight:bold':ex?'color:var(--text-green)':item.startsWith('.')?'color:#666':'';addOutput(`${perm} edem38 ${d?'4096':'1234'} <span style="${st}">${item}</span>`,'result');});}else{let o='<div class="file-list">';items.forEach(item=>{const fp=target==='/'?'/'+item:target+'/'+item;const d=isDir(fp),ex=fileSystem[fp]?.executable;let cls=d?'directory':ex?'executable':'file';if(item.startsWith('.'))cls+=' hidden';o+=`<span class="file-item ${cls}">${item}${d?'/':''}</span>`;});o+='</div>';addOutput(o,'result');}},cd:(args)=>{const t=args[0]||'/home/edem38';const np=resolvePath(t);if(!np){currentPath='/';return;}if(isDir(np))currentPath=np;else if(exists(np))addOutput(`cd: ${t}: Pas un r√©pertoire`,'error');else addOutput(`cd: ${t}: Non trouv√©`,'error');},pwd:()=>addOutput(currentPath,'result'),cat:(args)=>{if(!args.length){addOutput('cat: op√©rande manquant','error');return;}const fp=resolvePath(args[0]);if(isFile(fp))addOutput(fileSystem[fp].content.replace(/</g,'&lt;').replace(/>/g,'&gt;'),'result');else if(isDir(fp))addOutput(`cat: ${args[0]}: Est un r√©pertoire`,'error');else addOutput(`cat: ${args[0]}: Non trouv√©`,'error');},echo:(args)=>{const t=args.join(' ');if(t.includes('>')){const[content,file]=t.split('>').map(x=>x.trim());const fp=resolvePath(file);const pp=fp.substring(0,fp.lastIndexOf('/'))||'/';const bn=fp.substring(fp.lastIndexOf('/')+1);if(!isDir(pp)){addOutput(`bash: ${file}: Non trouv√©`,'error');return;}fileSystem[fp]={type:'file',content:content.replace(/^["']|["']$/g,'')};if(!fileSystem[pp].children.includes(bn))fileSystem[pp].children.push(bn);addOutput(`√âcrit dans '${bn}'`,'success');return;}addOutput(t.replace(/^["']|["']$/g,''),'result');},whoami:()=>addOutput('edem38','result'),hostname:()=>addOutput('edem38-pc','result'),date:()=>addOutput(new Date().toLocaleString('fr-FR',{weekday:'short',year:'numeric',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit',second:'2-digit'}),'result'),uname:(args)=>addOutput(args.includes('-a')?'Linux edem38-pc 5.15.0-91-generic x86_64 GNU/Linux':'Linux','result'),uptime:()=>addOutput('14:32:15 up 47 days, load average: 0.52, 0.48, 0.45','result'),clear:()=>terminal.innerHTML='',history:()=>commandHistory.forEach((c,i)=>addOutput(`  ${(i+1).toString().padStart(3)}  ${c}`,'result')),touch:(args)=>{if(!args.length){addOutput('touch: op√©rande manquant','error');return;}const fp=resolvePath(args[0]);const pp=fp.substring(0,fp.lastIndexOf('/'))||'/';const bn=fp.substring(fp.lastIndexOf('/')+1);if(!isDir(pp)){addOutput(`touch: '${args[0]}': Non trouv√©`,'error');return;}if(fileSystem[fp])return;fileSystem[fp]={type:'file',content:''};if(!fileSystem[pp].children.includes(bn))fileSystem[pp].children.push(bn);addOutput(`Fichier '${bn}' cr√©√©`,'success');},mkdir:(args)=>{if(!args.length){addOutput('mkdir: op√©rande manquant','error');return;}const dn=args.find(a=>!a.startsWith('-'));if(!dn){addOutput('mkdir: op√©rande manquant','error');return;}const dp=resolvePath(dn);const pp=dp.substring(0,dp.lastIndexOf('/'))||'/';const bn=dp.substring(dp.lastIndexOf('/')+1);if(fileSystem[dp]){addOutput(`mkdir: '${dn}': Existe d√©j√†`,'error');return;}if(!isDir(pp)){addOutput(`mkdir: '${dn}': Non trouv√©`,'error');return;}fileSystem[dp]={type:'dir',children:[]};if(!fileSystem[pp].children.includes(bn))fileSystem[pp].children.push(bn);addOutput(`R√©pertoire '${bn}' cr√©√©`,'success');},rm:(args)=>{if(!args.length){addOutput('rm: op√©rande manquant','error');return;}const r=args.includes('-r')||args.includes('-rf');const f=args.includes('-f')||args.includes('-rf');const t=args.find(a=>!a.startsWith('-'));if(!t){addOutput('rm: op√©rande manquant','error');return;}if((t==='/'||t==='/*')&&r){addOutput('rm: op√©ration dangereuse refus√©e üòà','warning');return;}const fp=resolvePath(t);const pp=fp.substring(0,fp.lastIndexOf('/'))||'/';const bn=fp.substring(fp.lastIndexOf('/')+1);if(!fileSystem[fp]&&!fileSystem[pp]?.children?.includes(bn)){if(!f)addOutput(`rm: '${t}': Non trouv√©`,'error');return;}if(isDir(fp)){if(!r){addOutput(`rm: '${t}': est un dossier`,'error');return;}Object.keys(fileSystem).filter(p=>p.startsWith(fp)).forEach(p=>delete fileSystem[p]);}delete fileSystem[fp];if(fileSystem[pp]?.children){const i=fileSystem[pp].children.indexOf(bn);if(i>-1)fileSystem[pp].children.splice(i,1);}addOutput(`'${bn}' supprim√©`,'success');},cp:(args)=>{if(args.length<2){addOutput('cp: op√©randes manquants','error');return;}const r=args.includes('-r');const fa=args.filter(a=>!a.startsWith('-'));if(fa.length<2){addOutput('cp: op√©randes manquants','error');return;}const sp=resolvePath(fa[0]);let dp=resolvePath(fa[1]);if(!fileSystem[sp]){addOutput(`cp: '${fa[0]}': Non trouv√©`,'error');return;}if(isDir(sp)&&!r){addOutput(`cp: '${fa[0]}': est un dossier (-r requis)`,'error');return;}if(isDir(dp))dp+='/'+sp.substring(sp.lastIndexOf('/')+1);const dpp=dp.substring(0,dp.lastIndexOf('/'))||'/';const dn=dp.substring(dp.lastIndexOf('/')+1);if(!isDir(dpp)){addOutput(`cp: '${fa[1]}': Non trouv√©`,'error');return;}fileSystem[dp]=isFile(sp)?{type:'file',content:fileSystem[sp].content,executable:fileSystem[sp].executable}:{type:'dir',children:[...fileSystem[sp].children]};if(!fileSystem[dpp].children.includes(dn))fileSystem[dpp].children.push(dn);addOutput(`'${fa[0]}' copi√© vers '${fa[1]}'`,'success');},mv:(args)=>{if(args.length<2){addOutput('mv: op√©randes manquants','error');return;}const sp=resolvePath(args[0]);let dp=resolvePath(args[1]);if(!fileSystem[sp]){addOutput(`mv: '${args[0]}': Non trouv√©`,'error');return;}if(isDir(dp))dp+='/'+sp.substring(sp.lastIndexOf('/')+1);const spp=sp.substring(0,sp.lastIndexOf('/'))||'/';const sn=sp.substring(sp.lastIndexOf('/')+1);const dpp=dp.substring(0,dp.lastIndexOf('/'))||'/';const dn=dp.substring(dp.lastIndexOf('/')+1);if(!isDir(dpp)){addOutput(`mv: '${args[1]}': Non trouv√©`,'error');return;}fileSystem[dp]=fileSystem[sp];delete fileSystem[sp];if(fileSystem[spp]?.children){const i=fileSystem[spp].children.indexOf(sn);if(i>-1)fileSystem[spp].children.splice(i,1);}if(!fileSystem[dpp].children.includes(dn))fileSystem[dpp].children.push(dn);addOutput(`'${args[0]}' ‚Üí '${args[1]}'`,'success');},find:(args)=>{let sp='.',pat='*';for(let i=0;i<args.length;i++){if(args[i]==='-name'&&args[i+1])pat=args[i+1].replace(/"/g,'');else if(!args[i].startsWith('-'))sp=args[i];}const bp=resolvePath(sp);const rx=new RegExp('^'+pat.replace(/\*/g,'.*').replace(/\?/g,'.')+'$');const res=Object.keys(fileSystem).filter(p=>(p.startsWith(bp)||bp==='/')&&rx.test(p.substring(p.lastIndexOf('/')+1)));if(!res.length)addOutput('Aucun r√©sultat','info');else res.forEach(r=>addOutput(r.replace('/home/edem38','~'),'result'));},grep:(args)=>{if(args.length<2){addOutput('Usage: grep [pattern] [file]','error');return;}const pat=args[0].replace(/"/g,'');const fp=resolvePath(args[1]);if(!isFile(fp)){addOutput(`grep: '${args[1]}': Non trouv√©`,'error');return;}const lines=fileSystem[fp].content.split('\n').filter(l=>l.toLowerCase().includes(pat.toLowerCase()));if(!lines.length)addOutput('(aucune correspondance)','info');else lines.forEach(l=>addOutput(l.replace(new RegExp(`(${pat})`,'gi'),'<span style="color:var(--text-red);font-weight:bold">$1</span>'),'result'));},head:(args)=>{if(!args.length){addOutput('head: op√©rande manquant','error');return;}const fp=resolvePath(args[0]);if(!isFile(fp)){addOutput(`head: '${args[0]}': Non trouv√©`,'error');return;}addOutput(fileSystem[fp].content.split('\n').slice(0,10).join('\n').replace(/</g,'&lt;'),'result');},tail:(args)=>{if(!args.length){addOutput('tail: op√©rande manquant','error');return;}const fp=resolvePath(args[0]);if(!isFile(fp)){addOutput(`tail: '${args[0]}': Non trouv√©`,'error');return;}addOutput(fileSystem[fp].content.split('\n').slice(-10).join('\n').replace(/</g,'&lt;'),'result');},wc:(args)=>{if(!args.length){addOutput('wc: op√©rande manquant','error');return;}const fp=resolvePath(args[0]);if(!isFile(fp)){addOutput(`wc: '${args[0]}': Non trouv√©`,'error');return;}const c=fileSystem[fp].content;addOutput(`  ${c.split('\n').length.toString().padStart(4)}  ${c.split(/\s+/).filter(w=>w).length.toString().padStart(4)}  ${c.length.toString().padStart(4)} ${args[0]}`,'result');},tree:(args)=>{const tp=args[0]?resolvePath(args[0]):currentPath;if(!isDir(tp)){addOutput(`tree: '${args[0]}': Non trouv√©`,'error');return;}function build(p,pre=''){const items=fileSystem[p]?.children||[];let r='';items.forEach((item,i)=>{const last=i===items.length-1;const fp=p==='/'?'/'+item:p+'/'+item;const d=isDir(fp);const con=last?'‚îî‚îÄ‚îÄ ':'‚îú‚îÄ‚îÄ ';const st=d?'color:var(--text-blue);font-weight:bold':'';r+=`${pre}${con}<span style="${st}">${item}</span>\n`;if(d)r+=build(fp,pre+(last?'    ':'‚îÇ   '));});return r;}const dp=tp==='/home/edem38'?'~':tp.replace('/home/edem38','~');addOutput(`<span style="color:var(--text-blue);font-weight:bold">${dp}</span>\n${build(tp)}`,'result');},df:()=>addOutput('Filesystem      Size  Used Avail Use%\n/dev/sda1       1.0T  256G  744G  26%','result'),ps:()=>addOutput('  PID TTY      TIME CMD\n 1234 pts/0  00:00:01 bash\n 5678 pts/0  00:00:00 node','result'),alias:()=>addOutput("alias ll='ls -la'\nalias gs='git status'",'result'),chmod:(args)=>{if(args.length<2){addOutput('chmod: op√©randes manquants','error');return;}const fp=resolvePath(args[1]);if(!exists(fp)){addOutput(`chmod: '${args[1]}': Non trouv√©`,'error');return;}if(fileSystem[fp])fileSystem[fp].executable=args[0].includes('+x');addOutput('Permissions modifi√©es','success');},neofetch:()=>addOutput(`<span style="color:var(--text-green)">       .--.\n      |o_o |\n      |:_/ |\n     //   \\ \\\n    (|     | )\n   /'\\_   _/\`\\\n   \\___)=(___/</span>\n\n<span style="color:var(--text-yellow)">OS:</span> Ubuntu 22.04\n<span style="color:var(--text-yellow)">Host:</span> edem38-pc\n<span style="color:var(--text-yellow)">Kernel:</span> 5.15.0-91-generic\n<span style="color:var(--text-yellow)">Shell:</span> bash 5.1.16`,'result'),exit:()=>{addOutput('√Ä bient√¥t ! üëã','success');addOutput('(Rechargez pour red√©marrer)','info');},sudo:()=>addOutput('edem38 is not in the sudoers file. üòÑ','warning')};
commands.ll=()=>commands.ls(['-la']);commands.la=()=>commands.ls(['-a']);
function execute(input){const t=input.trim();if(!t)return;commandHistory.push(t);historyIndex=commandHistory.length;addOutput(getPrompt()+t,'command');if(t.includes('|')&&!t.includes('>')){const parts=t.split('|').map(p=>p.trim());addOutput('(pipe simplifi√©)','info');parts.forEach(p=>{const[c,...a]=p.split(/\s+/);if(commands[c])commands[c](a);});validateCmd(t);return;}const[cmd,...args]=t.split(/\s+/);if(commands[cmd])commands[cmd](args);else addOutput(`${cmd}: commande introuvable. Tapez 'help'`,'error');validateCmd(t);}
function showWelcome(){addOutput(`<span class="welcome-art">  _     _                    _____                   _             _ 
 | |   (_)_ __  _   ___  __ |_   _|__ _ __ _ __ ___ (_)_ __   __ _| |
 | |   | | '_ \\| | | \\ \\/ /   | |/ _ \\ '__| '_ \` _ \\| | '_ \\ / _\` | |
 | |___| | | | | |_| |>  <    | |  __/ |  | | | | | | | | | | (_| | |
 |_____|_|_| |_|\\__,_/_/\\_\\   |_|\\___|_|  |_| |_| |_|_|_| |_|\\__,_|_|</span>`,'result');addOutput(`<span style="color:var(--text-cyan)">üéì Bienvenue ! Mode Apprentissage disponible.</span>`,'info');addOutput(`Tapez <span style="color:var(--text-yellow)">'help'</span> ou <span style="color:var(--text-yellow)">'learn'</span> pour commencer.`,'result');addOutput('','result');}
function createInputLine(){const inputLine=document.createElement('div');inputLine.className='input-line';inputLine.innerHTML=getPrompt();const input=document.createElement('input');input.type='text';input.autofocus=true;input.addEventListener('keydown',(e)=>{if(e.key==='Enter'){const value=input.value;inputLine.remove();execute(value);createInputLine();}else if(e.key==='ArrowUp'){e.preventDefault();if(historyIndex>0){historyIndex--;input.value=commandHistory[historyIndex];}}else if(e.key==='ArrowDown'){e.preventDefault();if(historyIndex<commandHistory.length-1){historyIndex++;input.value=commandHistory[historyIndex];}else{historyIndex=commandHistory.length;input.value='';}}else if(e.key==='Tab'){e.preventDefault();const parts=input.value.split(' ');const last=parts[parts.length-1];if(last){const path=resolvePath(last.substring(0,last.lastIndexOf('/')+1)||'.');const partial=last.substring(last.lastIndexOf('/')+1);if(isDir(path)){const matches=fileSystem[path].children.filter(c=>c.startsWith(partial));if(matches.length===1){parts[parts.length-1]=(last.includes('/')?last.substring(0,last.lastIndexOf('/')+1):'')+matches[0];input.value=parts.join(' ');}}}}else if(e.ctrlKey&&e.key==='l'){e.preventDefault();commands.clear();createInputLine();}});inputLine.appendChild(input);terminal.appendChild(inputLine);input.focus();terminal.scrollTop=terminal.scrollHeight;}
terminal.addEventListener('click',()=>{const input=terminal.querySelector('input');if(input)input.focus();});
loadState();showWelcome();createInputLine();renderLevels();
</script>
</body>
</html>
